<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email Verification</title>
</head>
<body style="font-family: 'Helvetica Neue', Arial, sans-serif; background:#f4f6f8; padding:24px; margin:0;">
  <table width="100%" cellspacing="0" cellpadding="0" style="max-width:560px; margin:0 auto; background:#ffffff; border-radius:16px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.05);">
    
    <!-- Header -->
    <tr>
      <td style="padding:32px 0; text-align:center; background:#fff8e1; border-bottom:1px solid #f1f1f1;">
        <div style="font-size:26px; font-weight:800; color:#111827; letter-spacing:0.5px;">
          <span style="color:#111827;">Timi</span><span style="color:#f59e0b;">pay</span>
        </div>
      </td>
    </tr>
    
    <!-- Body -->
    <tr>
      <td style="padding:32px 28px;">
        <h1 style="margin:0 0 12px; font-size:22px; color:#111827; text-align:center;">Confirm Your Signup</h1>
        <p style="margin:0 0 24px; color:#4b5563; font-size:15px; line-height:1.6; text-align:center;">
          Hi <strong>{{ .Email }}</strong>, welcome to <strong>Timipay</strong>!  
          Please enter the following <strong>one-time code</strong> on the website to complete your registration.
        </p>
        
        <!-- OTP Code - Try multiple ways to access the token -->
        <div style="text-align:center; margin:32px 0;">
          <span style="display:inline-block; background:#f59e0b; color:#ffffff; font-weight:700; font-size:20px; padding:14px 28px; border-radius:10px; letter-spacing:2px;">
            <!-- Try different ways to access the token -->
            {{ if .Token }}{{ .Token }}{{ else }}{{ if .UserMetadata }}{{ if .UserMetadata.Token }}{{ .UserMetadata.Token }}{{ else }}{{ if .UserMetadata.otp_token }}{{ .UserMetadata.otp_token }}{{ end }}{{ end }}{{ else }}{{ if index .UserMetadata "Token" }}{{ index .UserMetadata "Token" }}{{ else }}{{ if index .UserMetadata "otp_token" }}{{ index .UserMetadata "otp_token" }}{{ end }}{{ end }}{{ end }}{{ end }}
          </span>
        </div>
        
        <!-- Info Text -->
        <p style="margin:0 0 8px; color:#6b7280; font-size:13px; text-align:center;">
          This code will expire in <strong>1 minute 30 seconds</strong>.
        </p>
        
        <hr style="border:none; border-top:1px solid #e5e7eb; margin:32px 0;" />
        
        <!-- Instructions -->
        <div style="background:#f9fafb; border-radius:8px; padding:16px; margin:24px 0;">
          <p style="margin:0 0 8px; color:#374151; font-size:14px; font-weight:600;">How to verify:</p>
          <ol style="margin:0; padding-left:20px; color:#6b7280; font-size:13px; line-height:1.8;">
            <li>Go to the signup page on our website</li>
            <li>Enter the 6-digit code shown above</li>
            <li>Click "Verify" to complete your registration</li>
          </ol>
        </div>
        
        <!-- Footer Note -->
        <p style="margin:0; color:#9ca3af; font-size:12px; text-align:center;">
          If you didn't request this, you can safely ignore this email.
        </p>
      </td>
    </tr>
  </table>
  
  <!-- Footer -->
  <p style="text-align:center; color:#9ca3af; font-size:12px; margin-top:16px;">
    © {{ .SiteURL }} — Timipay. All rights reserved.
  </p>
</body>
</html>


